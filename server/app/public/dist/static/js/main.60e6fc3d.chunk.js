(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{222:function(e,t,a){e.exports=a(444)},227:function(e,t,a){},230:function(e,t,a){},234:function(e,t){},236:function(e,t){},268:function(e,t){},269:function(e,t){},315:function(e,t){},316:function(e,t){},317:function(e,t){},444:function(e,t,a){"use strict";a.r(t);var n=a(2),i=a.n(n),r=a(130),o=a.n(r),s=(a(227),a(70)),l=a.n(s),c=a(131),d=a(220),u=a(89),m=a(90),f=a(95),p=a(91),g=a(96),h=a(68),b=a(97),y=a.n(b),v=(a(230),a(132)),S=a(221),w=a(207),N=a.n(w),C=a(208),E=a.n(C),x=a(209),k=a.n(x),F=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(a=Object(f.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(i))))._refTarget=function(e){a.hoverTarget=e},a._refContent=function(e){a.hoverContent=e},a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.drop=new k.a({target:this.hoverTarget,content:this.hoverContent,position:"bottom left",openOn:"click",constrainToWindow:!0,constrainToScrollParent:!0,remove:!0})}},{key:"render",value:function(){return i.a.createElement("div",{id:"underDrop"},i.a.createElement("div",{ref:this._refTarget,className:"clickTarget"}),i.a.createElement("div",{className:"switchStation"},i.a.createElement("p",{id:"blurDescription"},i.a.createElement("span",null,"\u4e0d\u663e\u793a\u654f\u611f\u56fe\u7247")),i.a.createElement(E.a,{onColor:"#e79f23",offColor:"#000",onChange:this.props.blurChange,checked:this.props.blurStatus})))}}]),t}(n.Component),O=a(210),W=function(e){return e.showLoading?i.a.createElement("div",{id:"spinContainer"},i.a.createElement(O,{name:"three-bounce",color:"#e79f23",id:"processCube"})):null},I=(a(340),a(341),function(e){return i.a.createElement("div",null)}),M=a(453),j=a(458),_=a(454),D=a(451),T=a(460),P=function(e){return i.a.createElement(M.a,{height:150,domainPadding:{x:10}},i.a.createElement(j.a,{style:{tickLabels:{fill:"#fff",fontSize:8,padding:0},axisLabel:{fill:"#fff",fontSize:8,padding:10}},label:"GIF Frame Index"}),i.a.createElement(j.a,{dependentAxis:!0,style:{tickLabels:{fill:"#fff",fontSize:8},grid:{stroke:"gray"},ticks:{stroke:"gray",size:10}},tickValues:[0,.25,.5,.75,1],tickFormat:function(e){return"".concat((100*e).toFixed(0),"%")}}),i.a.createElement(_.a,{x:15,y:125,width:100,orientation:"horizontal",gutter:12,style:{border:{stroke:"black"},labels:{fill:"white",fontSize:8}},data:[{name:"Hentai",symbol:{fill:"#eef442",fillOpacity:.8}},{name:"Porn",symbol:{fill:"#f00",fillOpacity:.8}},{name:"Sexy",symbol:{fill:"#e79f23",fillOpacity:.8}},{name:"Drawing",symbol:{fill:"#0f0",fillOpacity:.8}},{name:"Neutral",symbol:{fill:"#fff",fillOpacity:.8}}]}),i.a.createElement(D.a,{animate:!0,labelComponent:i.a.createElement(T.a,{style:{fontSize:10}}),labels:function(e){return"".concat((100*e.probability).toFixed(0),"% ").concat(e.className)},style:{data:{fill:function(e){switch(e.className){case"Hentai":return"#eef442";case"Porn":return"#f00";case"Sexy":return"#e79f23";case"Drawing":return"#0f0";case"Neutral":return"#fff"}},fillOpacity:.8}},barRatio:1,data:e.data&&e.data.flat(),y:"probability",events:[{target:"data",eventHandlers:{onMouseOver:function(){return[{target:"data",mutation:function(t){return e.gifControl.pause(),e.gifControl.move_to(t.index),null}},{target:"labels",mutation:function(){return{active:!0}}}]},onMouseOut:function(){return[{target:"data",mutation:function(){return e.gifControl.play(),null}},{target:"labels",mutation:function(){return{active:!1}}}]}}}]}))},G=function(e){return i.a.createElement("div",{id:"results"},function(e){return e.predictions[0]&&e.predictions[0].className?(console.log(e.predictions),i.a.createElement("div",{id:"predictions"},i.a.createElement("ul",null,e.predictions.map(function(e){return"Neutral"===e.className?e.className="\u4e2d\u6027":"Drawing"===e.className?e.className="\u56fe\u753b":"Hentai"===e.className?e.className="\u53d8\u6001":"Sexy"===e.className?e.className="\u6027\u611f":"Porn"===e.className&&(e.className="\u8272\u60c5"),i.a.createElement("li",{key:e.className},e.className," - "," ",(100*e.probability).toFixed(2),"%")})))):e.predictions[0]?i.a.createElement(P,{data:e.predictions,gifControl:e.gifControl}):void 0}(e))},R={filter:"blur(30px)",WebkitFilter:"blur(30px)"},z={},B="Loading NSFWJS Model",A="\u70b9\u51fb\u4e0b\u65b9\u533a\u57df\u6dfb\u52a0\u56fe\u7247\u8fdb\u884c\u68c0\u6d4b",H="Cam active",L=1e3,J={mobilenetv2:["/quant_nsfw_mobilenet/"],inceptionv3:["/model/",{size:299}]},q=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(f.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={model:null,graphic:y.a,titleMessage:"\u6a21\u578b\u52a0\u8f7d\u4e2d...",message:B,predictions:[],droppedImageStyle:{opacity:.4},blurNSFW:!0,enableWebcam:!1,loading:!0,fileType:null,hardReset:!1,gifControl:null,currentModelName:"mobilenetv2"},a._onChange=function(e){var t=e.value;a.setState({currentModelName:t},a._loadModel)},a._loadModel=function(){a.setState({titleMessage:"\u6a21\u578b\u52a0\u8f7d\u4e2d...",message:B,droppedImageStyle:{opacity:.4},graphic:y.a,hardReset:!0,predictions:[],loading:!0}),v.load.apply(v,Object(d.a)(J[a.state.currentModelName])).then(function(e){a.setState({model:e,titleMessage:a.state.enableWebcam?H:A,message:"Ready to Classify",loading:!1})})},a._refWeb=function(e){a.webcam=e},a.detectBlurStatus=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.state.blurNSFW,n=z;if("image/gif"===a.state.fileType)n=a.detectGifEvil(e)>0&&t?R:z;else if(t)switch(e[0].className){case"Hentai":case"Porn":case"Sexy":n=R}return n},a.detectGifEvil=function(e){return e.filter(function(e){return["Hentai","Porn","Sexy"].includes(e[0].className)}).flat().length},a.checkContent=Object(c.a)(l.a.mark(function e(){var t,n,i,r,o,s,c;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.sleep(100);case 2:if(t=a.refs.dropped,"image/gif"!==a.state.fileType){e.next=14;break}return a.setState({message:"0% - Parsing GIF frames",predictions:[],loading:!0}),e.next=7,a.state.model.classifyGif(t,{topk:1,setGifControl:function(e){a.setState({gifControl:e})},onFrame:function(e){var t=e.index,n=e.totalFrames,i=e.predictions,r=(t/n*100).toFixed(0);a.setState({message:"".concat(r,"% - Frame ").concat(t," is ").concat(i[0].className)})}});case 7:n=e.sent,i=a.detectGifEvil(n),r=a.detectBlurStatus(n),o=i>0?"Detected ".concat(i," NSFW frames"):"All frames look clean",a.setState({message:"GIF Result: ".concat(o),predictions:n,droppedImageStyle:r,loading:!1}),e.next=19;break;case 14:return e.next=16,a.state.model.classify(t);case 16:s=e.sent,c=a.detectBlurStatus(s),a.setState({message:"Identified as ".concat(s[0].className),predictions:s,droppedImageStyle:c});case 19:case"end":return e.stop()}},e,this)})),a.setFile=function(e){var t=new FileReader;t.onload=function(t){a.setState({graphic:t.target.result,fileType:e.type},a.checkContent)},t.readAsDataURL(e)},a.onDrop=function(e,t){if(t.length>0)window.alert("JPG, PNG, GIF only plz");else{var n=a.state.blurNSFW?R:z;a.setState({message:"Processing...",droppedImageStyle:n,hardReset:!0}),a.setFile(e[0])}},a.detectWebcam=Object(c.a)(l.a.mark(function e(){var t,n,i;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.sleep(100);case 2:if(!(t=document.querySelectorAll(".captureCam"))[0]){e.next=10;break}return e.next=6,a.state.model.classify(t[0]);case 6:n=e.sent,i=a.detectBlurStatus(n),a.setState({message:"Identified as ".concat(n[0].className),predictions:n,graphic:y.a,droppedImageStyle:i}),setTimeout(a.detectWebcam,L);case 10:case"end":return e.stop()}},e,this)})),a.blurChange=function(e){var t=z;a.state.predictions.length>0&&(t=a.detectBlurStatus(a.state.predictions,e)),a.setState({blurNSFW:e,droppedImageStyle:t})},a._renderInterface=function(){var e=window.innerWidth,t=window.innerHeight,n={width:{ideal:e,max:e},height:{ideal:t,max:t},facingMode:"environment"};return a.state.enableWebcam?i.a.createElement(N.a,{id:"capCam",className:"captureCam",style:a.state.droppedImageStyle,width:e,audio:!1,ref:a._refWeb,videoConstraints:n}):a.state.hardReset?(a.setState({hardReset:!1}),null):i.a.createElement(S.a,{id:"dropBox",accept:"image/jpeg, image/png, image/gif",className:"photo-box",onDrop:a.onDrop.bind(Object(h.a)(Object(h.a)(a)))},i.a.createElement("div",{style:a.state.droppedImageStyle},i.a.createElement("img",{src:a.state.graphic,alt:"drop your file here",className:"dropped-photo",ref:"dropped"})))},a._camChange=function(e){navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?(a.detectWebcam(),a.setState({enableWebcam:!a.state.enableWebcam,message:"Ready",predictions:[],droppedImageStyle:{},fileType:null,titleMessage:a.state.enableWebcam?A:H})):window.alert("Sorry, your browser doesn't seem to support camera access.")},a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this._loadModel()}},{key:"sleep",value:function(e){return new Promise(function(t){return setTimeout(t,e)})}},{key:"render",value:function(){return i.a.createElement("div",{className:"App"},i.a.createElement("main",null,i.a.createElement("div",{className:"main-wrap"},i.a.createElement("div",{id:"overDrop"},i.a.createElement("p",{id:"topMessage"},this.state.titleMessage)),this._renderInterface(),i.a.createElement(F,{camChange:this._camChange,camStatus:this.state.enableWebcam,blurChange:this.blurChange,blurStatus:this.state.blurNSFW})),i.a.createElement(W,{showLoading:this.state.loading}),i.a.createElement(G,{message:this.state.message,gifControl:this.state.gifControl,predictions:this.state.predictions})),i.a.createElement(I,{onChange:this._onChange,value:this.state.currentModelName}))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(i.a.createElement(q,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},97:function(e,t,a){e.exports=a.p+"static/media/logo.10bad2c7.jpg"}},[[222,1,2]]]);
//# sourceMappingURL=main.60e6fc3d.chunk.js.map